<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>マイページ：メモ・画像・ファイル</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    h2 {
      border-bottom: 2px solid #ccc;
      padding-bottom: 4px;
    }
    textarea {
      width: 100%;
      height: 150px;
    }
    img {
      max-width: 100%;
      height: auto;
      margin-top: 10px;
    }
    ul {
      padding-left: 20px;
    }
    li {
      margin-bottom: 5px;
    }
  </style>
</head>
<body>

  <h1>マイページ</h1>

  <!-- 📘 メモ帳 -->
  <h2>📝 メモ</h2>
  <textarea id="memo"></textarea><br>
  <button onclick="saveMemo()">保存</button>
  <button onclick="loadMemo()">読み込み</button>

  <!-- 🖼 画像アップロード -->
  <h2>🖼 画像アップロード</h2>
  <input type="file" id="imageInput" accept="image/*"><br>
  <img id="imagePreview" src="" alt="まだ画像がありません">

  <!-- 📁 ファイルアップロード -->
  <h2>📁 ファイルアップロード</h2>
  <input type="file" id="fileInput" multiple><br><br>
  <ul id="fileList"></ul>

  <script>
    // 🔹 メモ保存・読み込み
    function saveMemo() {
      const text = document.getElementById('memo').value;
      localStorage.setItem('myMemo', text);
      alert('メモを保存しました！');
    }

    function loadMemo() {
      const saved = localStorage.getItem('myMemo');
      document.getElementById('memo').value = saved || '';
    }

    // 🔹 画像プレビュー
    const imageInput = document.getElementById('imageInput');
    const imagePreview = document.getElementById('imagePreview');

    imageInput.addEventListener('change', function () {
      const file = imageInput.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          imagePreview.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    });

    // 🔹 ファイル一覧表示
    const fileInput = document.getElementById('fileInput');
    const fileList = document.getElementById('fileList');

    fileInput.addEventListener('change', function () {
      fileList.innerHTML = '';
      const files = Array.from(fileInput.files);

      files.forEach(file => {
        const li = document.createElement('li');
        const link = document.createElement('a');
        link.textContent = file.name;
        link.href = URL.createObjectURL(file);
        link.download = file.name;
        link.target = "_blank";
        li.appendChild(link);
        fileList.appendChild(li);
      });
    });

    // ページ読み込み時にメモを自動読み込み
    window.onload = loadMemo;
  </script>

</body>
</html>